# 可愛い声実験 - デスクトップ音声処理アプリケーション

このプロジェクトは、論文「Finding Kawaii」（arXiv:2507.06235）の研究成果に基づき、音声の基本周波数（F0）とフォルマント周波数（F1-F3）を調整することで「可愛い声」のスイートスポットを探索できるデスクトップアプリケーションです。

## プロジェクト概要

高品質な音声処理を実現するため、Python + PyWorldによるデスクトップアプリケーションとして開発します。Web版と比較して、より精密な音声制御と研究レベルの品質を提供します。

## ファイル構成

### ドキュメント

#### 1. `requirements-specification.md`
MVPソフトウェアの要件定義書：
- 機能要件（F0/フォルマント制御、ループ再生、プリセット等）
- 非機能要件（パフォーマンス、ユーザビリティ）
- UI/UXデザイン仕様
- 開発フェーズ計画

#### 2. `technical-selection.md`
技術選定と実装方針：
- PyWorld + sounddevice + PySide6の選定理由
- ハイブリッドアプローチによるリアルタイム処理実現
- システムアーキテクチャ設計
- パフォーマンス最適化戦略

#### 3. `kawaii-voice-research-report.md`
論文調査と技術研究レポート：
- 論文（arXiv:2507.06235）の要約と知見
- 音声処理技術（WORLD、Phase Vocoder、PSOLA）の詳細
- MVP開発への具体的な提案

#### 4. `real-time-audio-processing-comparison.md`
音声処理実装の技術比較：
- 各種Python音声処理ライブラリの詳細比較
- PyWorldの特徴と制限事項
- GUI フレームワークの選定根拠

### 実装ファイル

#### 1. `kawaii_voice_core.py`
音声処理のコアモジュール：
- AudioProcessor: PyWorldによる音声分析・合成
- AudioPlayer: sounddeviceによるループ再生
- プリセット定義

#### 2. `kawaii_voice_gui.py`（開発予定）
PySide6によるGUIアプリケーション：
- ファイルドラッグ&ドロップ
- リアルタイムパラメータ調整スライダー
- 波形・スペクトラム表示
- プリセット管理

#### 3. `kawaii_voice_app.py`（開発予定）
メインアプリケーション統合

## 主要概念

### ピッチシフト
- 声の基本周波数（F0）を変更
- 声を高くまたは低くする
- 比率 > 1.0 = 高いピッチ、< 1.0 = 低いピッチ

### フォルマントシフト
- 声道共鳴（フォルマント）を変更
- ピッチに影響を与えずに声の特性を変更
- 比率 > 1.0 = より若い/小さい声道、< 1.0 = より大きい声道

### 可愛い声エフェクト
通常以下を組み合わせます：
- わずかなピッチ上昇（1.1-1.3倍）
- フォルマントを上にシフト（1.2-1.5倍）
- 可愛い声の特性を作りながら明瞭度を保持

## 技術スタック

### コア依存関係
```
pyworld-prebuilt  # 高品質音声処理（コンパイル不要版）
sounddevice       # 低遅延音声I/O
soundfile         # 音声ファイル読み書き
numpy             # 数値計算
scipy             # 信号処理
PySide6           # GUI フレームワーク
pyqtgraph         # リアルタイム波形表示
```

### 開発環境要件
- Python 3.8以上
- Windows 10/11, macOS 10.15+, Ubuntu 20.04+
- 4GB以上のRAM推奨

## インストール手順

```bash
# 仮想環境の作成
python -m venv kawaii_voice_env
source kawaii_voice_env/bin/activate  # Mac/Linux
# kawaii_voice_env\Scripts\activate  # Windows

# 依存関係のインストール
pip install pyworld-prebuilt sounddevice soundfile
pip install PySide6 pyqtgraph
pip install numpy scipy

# アプリケーションの実行
python kawaii_voice_app.py
```

## パフォーマンスのヒント

1. **バッファサイズ**: レイテンシと安定性のバランス
   - 小さいバッファ = 低レイテンシだがCPU使用率が高い
   - 典型的: 256-1024サンプル

2. **サンプルレート**: 
   - 音声用に最小16kHz
   - より良い品質のために44.1kHz
   - 高いレートはCPU使用率を増加

3. **処理の最適化**:
   - 2の累乗のFFTサイズを使用
   - Web用のGPUアクセラレーションを検討
   - 特定の使用ケースをプロファイル

## アプリケーション使用方法

1. **音声ファイルの読み込み**
   - ファイルをウィンドウにドラッグ&ドロップ
   - または「ファイルを開く」ボタンから選択

2. **パラメータ調整**
   - F0スライダー: 声の高さを調整（0.5〜2.0倍）
   - F1-F3スライダー: 各フォルマントを個別調整
   - 連動モード: すべてのフォルマントを一括調整

3. **プリセット使用**
   - ドロップダウンから選択して即座に適用
   - カスタムプリセットの保存も可能

4. **再生制御**
   - 自動的にループ再生開始
   - 再生/一時停止、音量調整が可能

## 今後の拡張計画

### 短期（実装予定）
- 処理結果のエクスポート機能
- A/B比較モード
- より詳細なスペクトラム表示

### 長期（検討中）
- マイク入力のリアルタイム処理
- AIによる「可愛さ」自動評価
- VST/AUプラグイン化
- バッチ処理機能

## トラブルシューティング

### PyWorldのインストールエラー
```bash
# コンパイルエラーの場合
pip install pyworld-prebuilt  # プリビルド版を使用
```

### 音声が再生されない
- サンプリングレートが16kHz以上か確認
- sounddeviceのデバイス設定を確認

## ライセンス

本プロジェクトは教育・研究目的で公開されています。各依存ライブラリのライセンスもご確認ください。